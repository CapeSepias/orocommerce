layout:
    imports:
        -
            id: oro_product_totals
            root: __form_summary
    actions:
        - '@setBlockTheme':
            themes: 'matrix_grid_order.html.twig'
        - '@setFormTheme':
            themes: 'matrix_grid_order_form.html.twig'
        - '@addTree':
            items:
                __wrapper:
                    blockType: matrix_grid_order
                    options:
                        visible: '=data.offsetExists("product") ? data["oro_product_form_availability"].isMatrixFormAvailable(product) : true'
                        product: '=data.offsetExists("product") ? data["product"]'
                        shoppingList: '=data.offsetExists("shoppingList") ? data["shoppingList"] : data["oro_shopping_list_customer_user_shopping_lists"].getCurrent()'
                        form: '=data.offsetExists("product") ? data["oro_shopping_list_matrix_order_form"].getMatrixOrderFormView(product, shoppingList)'
                        prices: '=data.offsetExists("product") ? data["frontend_product_prices"].getSimpleByConfigurable(product)'
                        totals:
                            quantity: '=data.offsetExists("product") ? data["oro_shopping_list_matrix_grid_order"].getTotalQuantity(product)'
                            price: '=data.offsetExists("product") ? data["oro_shopping_list_matrix_grid_order"].getTotalPriceFormatted(product)'
                __form_start:
                    blockType: form_start
                __form_fields:
                    blockType: form_fields
                __form_end:
                    blockType: form_end
                __form_summary:
                    blockType: container
            tree:
                __root:
                    __wrapper:
                        __form_start: ~
                        __form_fields: ~
                        __form_summary: ~
                        __form_end: ~

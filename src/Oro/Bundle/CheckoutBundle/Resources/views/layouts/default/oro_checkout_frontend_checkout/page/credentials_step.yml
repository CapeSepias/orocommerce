layout:
    imports:
        -
            id: oro_customer_form_login
            namespace: checkout_login
            root: signin_tab
        -
            id: oro_customer_form
            namespace: registration
            root: page_main_content
    actions:
        - '@setBlockTheme':
            themes:
                - '../templates/credentials_step.html.twig'

        - '@setOption':
            id: checkout_information
            optionName: stepOrder
            optionValue: 0

        - '@remove':
            id: page_sidebar

        - '@remove':
            id: page_title

        - '@remove':
            id: checkout_information

        - '@remove':
            id: checkout_order_summary

        - '@add':
            id: form_submit_wrapper
            parentId: checkout_login_login_form_fields
            blockType: container

        - '@add':
            id: form_submit
            parentId: form_submit_wrapper
            blockType: button
            options:
                type: input
                action: submit
                style: auto
                text: oro.customer.customeruser.profile.login

        - '@add':
            id: login_link_forgot
            parentId: checkout_login_login_form_fields
            blockType: link
            options:
                route_name: oro_customer_frontend_customer_user_reset_request
                text: oro.customer.customeruser.profile.forgot_password

        - '@setOption':
            id: registration_label
            optionName: text
            optionValue: oro.customer.customeruser.profile.register

        - '@setOption':
            id: registration_description
            optionName: text
            optionValue: oro.customer.customeruser.profile.register.description

        - '@setOption':
            id: registration_form
            optionName: form
            optionValue: '=data["oro_customer_frontend_customer_user_register"].getRegisterFormView()'

        - '@setOption':
            id: registration_form_submit
            optionName: text
            optionValue: oro.customer.customeruser.profile.create_an_customer

        - '@add':
            id: tabs
            parentId: page_main_content
            blockType: container

        - '@add':
           id: signin_tab
           parentId: tabs
           blockType: container

        - '@move':
            id: registration_form
            parentId: tabs
        - '@remove':
            id: registration_page_wrapper

        - '@add':
           id: continue_as_guest_button
           blockType: continue_as_guest_button
           parentId: page_main_content
           options:
               transitionData: '=data["oro_checkout_transition"].getContinueTransition(data["workflowItem"])'
               checkout: '=data["checkout"]'

        - '@add':
            id: checkout_id_field
            parentId: checkout_login_login_form_fields
            blockType: input
            options:
                type: hidden
                name: _checkout_id
                value: '=data["checkout"].getId()'

        - '@setOption':
            id: checkout_login_login_form_target
            optionName: value
            optionValue: '=data["oro_path"].getTargetPath("oro_checkout_frontend_checkout", {id: data["checkout"].getId(), transition: "back_to_billing_address"})'

    conditions: 'context["workflowStepName"]=="enter_credentials_step"'
